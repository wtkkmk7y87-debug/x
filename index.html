<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>手書きマップGPS</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
 #map { width: 100%; height: 100vh; }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
 // 画像サイズ
 var imgWidth = 1000;
 var imgHeight = 800;
 // 緯度経度の端点（MapwarperでWarp済み）
 var latTop = 35.64000;
 var lonLeft = 139.29800;
 var latBottom = 35.63900;
 var lonRight = 139.30000;
 // 緯度経度 → 画像座標変換
 function latLonToPoint(lat, lon) {
   var x = ((lon - lonLeft)/(lonRight - lonLeft)) * imgWidth;
   var y = ((latTop - lat)/(latTop - latBottom)) * imgHeight;
   return [x, y];
 }
 var map = L.map('map', {crs: L.CRS.Simple, minZoom:-1});
 var bounds = [[0,0],[imgHeight,imgWidth]];
 L.imageOverlay('map.png', bounds).addTo(map);
 map.fitBounds(bounds);
 // GPS取得
 function onLocationFound(e) {
   var pt = latLonToPoint(e.latitude, e.longitude);
   L.marker([pt[1], pt[0]]).addTo(map).bindPopup("現在地").openPopup();
 }
 map.locate({setView:true, maxZoom:18});
 map.on('locationfound', onLocationFound);
</script>
</body>
</html>